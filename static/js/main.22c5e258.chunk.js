(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);a(94);var n=a(0),r=a.n(n),c=a(89),o=a.n(c),u=a(20),l=a(16),i=a(3),s=a.n(i),d=a(12),m=a(7),f=a(2),b=a(26),p=a.n(b),h=a(17),g=a(27),v=a(90),E={_id:"data",cash:[],budgets:[],savings:0},y=r.a.createContext({}),w=new v.a("tesya-db"),j=y,O=(a(206),function(e){var t=e.history,a=Object(n.useContext)(j),c=a.data.budgets,o=a.updateData,u=Object(n.useState)(""),l=Object(f.a)(u,2),i=l[0],b=l[1],h=Object(n.useState)(""),g=Object(f.a)(h,2),v=g[0],E=g[1],y=Object(n.useState)("D"),w=Object(f.a)(y,2),O=w[0],x=w[1],k=function(){var e=Object(m.a)(s.a.mark(function e(){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],0===i.length&&a.push("Must have a name."),c.find(function(e){return e.name.toLowerCase()===i.toLowerCase()})&&a.push("".concat(i," is already taken.")),+v<=0&&a.push("Budget must be a postive number."),!a.length){e.next=9;break}window.alert(a.join("\n")),e.next=13;break;case 9:return n=[].concat(Object(d.a)(c),[{_id:p()(),name:i,amount:+v,frequency:O,createdAt:(new Date).toJSON(),transactions:[]}]),e.next=12,o({budgets:n});case 12:t.push("/dashboard");case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"add-budget"},r.a.createElement("div",{style:{flex:1}},r.a.createElement("h2",null,"Add Budget"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-name"},"Name:"),r.a.createElement("input",{type:"text",name:"budget-name",autoFocus:!0,value:i,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-amount"},"Budget:"),r.a.createElement("input",{type:"number",name:"budget-amount",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-frequency"},"Frequency:"),r.a.createElement("div",{className:"radio-container",onClick:function(){x("D")}},r.a.createElement("input",{type:"radio",name:"budget-frequency",value:"D",checked:"D"===O,onChange:function(e){return x(e.target.value)}}),"Day"),r.a.createElement("div",{className:"radio-container",onClick:function(){x("M")}},r.a.createElement("input",{type:"radio",name:"budget-frequency",value:"M",checked:"M"===O,onChange:function(e){return x(e.target.value)}}),"Month")))),r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("button",{type:"button",onClick:function(){t.push("/dashboard")}},"Cancel"),r.a.createElement("button",{type:"button",onClick:k},"Add")))}),x=(a(207),function(e){var t=e.history,a=e.location,c=Object(n.useContext)(j),o=c.data,u=o.budgets,l=o.cash,i=c.updateData,b=a.state&&"cash"===a.state.transaction,g=a.state&&a.state.transaction&&"cash"!==a.state.transaction,v=Object(n.useState)(b?"cash":"budget"),E=Object(f.a)(v,2),y=E[0],w=E[1],O=Object(n.useState)(g?a.state.transaction:""),x=Object(f.a)(O,2),k=x[0],C=x[1],N=Object(n.useState)(""),D=Object(f.a)(N,2),S=D[0],A=D[1],_=Object(n.useState)(""),M=Object(f.a)(_,2),B=M[0],F=M[1];Object(n.useEffect)(function(){u&&u.length&&!g&&C(u[0]._id)},[u,g]);var q=function(){var e=Object(m.a)(s.a.mark(function e(){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"cash"!==y){e.next=7;break}return n=[].concat(Object(d.a)(l),[{_id:p()(),amount:+S,createdAt:(new Date).toJSON()}]),e.next=5,i({cash:n});case 5:return t.push("/dashboard"),e.abrupt("return");case 7:if(+S<=0&&a.push("Budget must be a postive number."),""===k&&a.push("Must assign to budget."),!a.length){e.next=11;break}return e.abrupt("return",window.alert(a.join("\n")));case 11:return r=u.map(function(e){return e._id===k?Object(h.a)({},e,{transactions:[].concat(Object(d.a)(e.transactions),[{_id:p()(),amount:+S,createdAt:(new Date).toJSON(),note:B}])}):e}),e.next=14,i({budgets:r});case 14:t.push("/dashboard");case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"add-transaction"},r.a.createElement("div",{style:{flex:1}},r.a.createElement("h2",null,"Add Transaction"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"type"},"Type:"),r.a.createElement("div",{className:"radio-container",onClick:function(){w("budget")}},r.a.createElement("input",{type:"radio",name:"type",value:"budget",checked:"budget"===y,onChange:function(e){return w(e.target.value)}}),"Budget"),r.a.createElement("div",{className:"radio-container",onClick:function(){w("cash")}},r.a.createElement("input",{type:"radio",name:"type",value:"cash",checked:"cash"===y,onChange:function(e){return w(e.target.value)}}),"Cash")),"budget"===y&&r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-id"},"Budget:"),r.a.createElement("select",{name:"budget-id",value:k,onChange:function(e){C(e.target.value)}},u&&u.map(function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"amount"},"Amount:"),r.a.createElement("input",{type:"number",value:S,onChange:function(e){return A(e.target.value)},autoFocus:b||g})),"budget"===y&&r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"note"},"Note:"),r.a.createElement("input",{type:"text",value:B,onChange:function(e){return F(e.target.value)}})))),r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("button",{type:"button",onClick:function(){t.push("/dashboard")}},"Cancel"),r.a.createElement("button",{type:"button",onClick:q},"Add")))}),k=a(19),C=a.n(k);var N=function(e){if(null===e||void 0===e)return e;var t=e.toString().split(".");return t[0].length>=4&&(t[0]=t[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),t[1]&&t[1].length>=5&&(t[1]=t[1].replace(/(\d{3})/g,"$1 ")),t.join(".")},D=(a(208),function(e){var t=e.history,a=e.match,c=Object(n.useContext)(j),o=c.data.budgets,u=c.updateData,l=Object(n.useState)(""),i=Object(f.a)(l,2),b=i[0],p=i[1],g=Object(n.useState)(""),v=Object(f.a)(g,2),E=v[0],y=v[1],w=Object(n.useState)("D"),O=Object(f.a)(w,2),x=O[0],k=O[1],D=Object(n.useState)(null),S=Object(f.a)(D,2),A=S[0],_=S[1],M=Object(n.useState)([]),B=Object(f.a)(M,2),F=B[0],q=B[1];Object(n.useEffect)(function(){if(o){var e=o.find(function(e){return e._id===a.params.id});e?(p(e.name),y(e.amount),k(e.frequency),q(e.transactions.reduce(function(e,t){var a=C()(t.createdAt,"MM/DD/YY");return e[a]||(e[a]=[]),e[a].push(t),e},{})),_(!0)):_(!1)}},[o,a,a.params.id]);var T=function(){var e=Object(m.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],0===b.length&&t.push("Must have a name."),o.find(function(e){return e.name.toLowerCase()===b.toLowerCase()&&e._id!==a.params.id})&&t.push("".concat(b," is already taken.")),E<=0&&t.push("Budget must be a postive number."),!t.length){e.next=9;break}window.alert(t.join("\n")),e.next=13;break;case 9:return n=o.map(function(e){return e._id===a.params.id?Object(h.a)({},e,{name:b,amount:E,frequency:x}):e}),e.next=12,u({budgets:n});case 12:window.alert("Saved");case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this budget?")){e.next=6;break}return n=o.filter(function(e){return e._id!==a.params.id}),e.next=4,u({budgets:n});case 4:t.push("/dashboard"),window.alert("Budget deleted.");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this transaction:\n      Date: ".concat(C()(t.createdAt,"ddd | MMM DD, YYYY HH:mm"),"\n      Note: ").concat(t.note||"\u2014","\n      Amount: ").concat(N(t.amount),"\n    "))){e.next=5;break}return n=o.map(function(e){return e._id===a.params.id?Object(h.a)({},e,{transactions:e.transactions.filter(function(e){return e._id!==t._id})}):e}),e.next=4,u({budgets:n});case 4:window.alert("Deleted.");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return null===A?null:A?r.a.createElement("section",{className:"add-budget"},r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("h2",null,"Budget - ",b),r.a.createElement("button",{onClick:function(){return t.push("/dashboard")}},"Back")),r.a.createElement("h2",null,"Transactions"),r.a.createElement("div",null,!Object.keys(F).length&&"None",Object(d.a)(Object.keys(F)).sort(function(e,t){return(e=new Date(e))>(t=new Date(t))?-1:e<t?1:0}).map(function(e){return r.a.createElement("table",{key:e,style:{width:"100%",marginBottom:10}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:3},C()(new Date(e),"ddd | MMM D, YYYY")))),r.a.createElement("tbody",null,Object(d.a)(F[e]).sort(function(e,t){return(e=new Date(e.createdAt))>(t=new Date(t.createdAt))?-1:e<t?1:0}).map(function(e){return r.a.createElement("tr",{key:e._id,onClick:function(){return L(e)}},r.a.createElement("td",{style:{width:55,fontSize:"0.75em"}},C()(e.createdAt,"HH:mm")),r.a.createElement("td",{style:{fontSize:"0.75em"}},e.note||"\u2014"),r.a.createElement("td",{style:{textAlign:"right",padding:"5px 0",fontSize:"0.75em"}},N(e.amount)))})))})),r.a.createElement("h2",{style:{marginTop:20}},"Info"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-name"},"Name:"),r.a.createElement("input",{type:"text",name:"budget-name",value:b,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-amount"},"Budget:"),r.a.createElement("input",{type:"number",name:"budget-amount",value:E,onChange:function(e){return y(+e.target.value)}})),r.a.createElement("div",{className:"form-item"},r.a.createElement("label",{htmlFor:"budget-frequency"},"Frequency:"),r.a.createElement("div",{className:"radio-container",onClick:function(){k("D")}},r.a.createElement("input",{type:"radio",name:"budget-frequency",value:"D",checked:"D"===x,onChange:function(e){return k(e.target.value)}}),"Day"),r.a.createElement("div",{className:"radio-container",onClick:function(){k("M")}},r.a.createElement("input",{type:"radio",name:"budget-frequency",value:"M",checked:"M"===x,onChange:function(e){return k(e.target.value)}}),"Month"))),r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("button",{type:"button",onClick:Y},"Delete"),r.a.createElement("button",{type:"button",onClick:T},"Edit"))):r.a.createElement("div",null,r.a.createElement("h2",null,"Budget with id: ",a.params.id," does not exist."),r.a.createElement("button",{onClick:function(){t.push("/dashboard")}},"Back"))}),S=a(34),A=a.n(S),_=(a(209),function(e){var t=e.history,a=Object(n.useContext)(j),c=a.data,o=c.budgets,l=c.savings,i=a.totalCash,s=a.extraBudget,d=a.updateData,m=Object(n.useMemo)(function(){var e=-l;if(o){var t=Object(g.getDaysInMonth)(new Date),a=!0,n=!1,r=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var i=c.value;"D"===i.frequency?(e-=i.amount,e-=i.amount*t):e-=i.amount}}catch(s){n=!0,r=s}finally{try{a||null==u.return||u.return()}finally{if(n)throw r}}}return{expenditures:e}},[o,l]).expenditures;return o?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"dashboard"},r.a.createElement("div",{style:{flex:1}},r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("h2",null,"Budgets"),r.a.createElement("div",null,r.a.createElement("span",null,"Cash: "),r.a.createElement(u.b,{to:{pathname:"/add-transaction",state:{transaction:"cash"}},className:A()("budget-extra",{positive:i>0,negative:i<0})},i>0&&"+",N(i)))),r.a.createElement("table",{className:"budget-table"},r.a.createElement("tbody",null,o.map(function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",{style:{padding:"5px 0"}},r.a.createElement(u.b,{className:"budget-name",to:"/budget/".concat(e._id)},e.name)),r.a.createElement("td",{style:{textAlign:"right"}},r.a.createElement(u.b,{to:{pathname:"/add-transaction",state:{transaction:e._id}},className:A()("budget-extra",{positive:s[e._id]>0,negative:s[e._id]<0})},s[e._id]>0&&"+",N(s[e._id]))),r.a.createElement("td",{className:"budget-amount"},N(e.amount),"/",e.frequency))}))),r.a.createElement("table",{className:"budget-table",style:{marginTop:20}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{textDecoration:"underline"},onClick:function(){var e=window.prompt("Savings:");null!==e&&d({savings:e})}},"Savings")),r.a.createElement("td",{className:"budget-amount"},N(l),"/M")))),r.a.createElement("table",{style:{textAlign:"right",float:"right",marginTop:40}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Expenditures:"),r.a.createElement("td",null,r.a.createElement("span",{className:A()("budget-extra",{positive:m>0,negative:m<0}),style:{marginLeft:10}},m>0&&"+",N(m))))))),r.a.createElement("div",{className:"row",style:{justifyContent:"space-between"}},r.a.createElement("button",{onClick:function(){t.push("/add-transaction")}},"Add Transaction"),r.a.createElement("button",{onClick:function(){t.push("/add-budget")}},"Add Budget")))):null}),M=function(){return r.a.createElement(u.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:_}),r.a.createElement(l.b,{exact:!0,path:"/budget/:id",component:D}),r.a.createElement(l.b,{exact:!0,path:"/add-budget",component:O}),r.a.createElement(l.b,{exact:!0,path:"/add-transaction",component:x}),r.a.createElement(l.a,{to:"/"})))},B=(a(218),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function F(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(e){var t=e.children,a=Object(n.useState)({}),c=Object(f.a)(a,2),o=c[0],u=c[1],l=Object(n.useState)(0),i=Object(f.a)(l,2),d=i[0],b=i[1],p=Object(n.useState)({}),v=Object(f.a)(p,2),j=v[0],O=v[1];function x(){return k.apply(this,arguments)}function k(){return(k=Object(m.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("data");case 3:t=e.sent,u(t),e.next=15;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,w.put(E);case 11:return e.next=13,w.get("data");case 13:a=e.sent,u(a);case 15:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}Object(n.useEffect)(function(){if(Object.keys(o).length){var e=0,t=!0,a=!1,n=void 0;try{for(var r,c=o.cash[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)e+=r.value.amount}catch(k){a=!0,n=k}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}var u={},l=!0,i=!1,s=void 0;try{for(var d,m=o.budgets[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var f=d.value,p=new Date,h=(("D"===f.frequency?g.differenceInDays:g.differenceInMonths)(p,new Date(f.createdAt))+1)*f.amount,v=!0,E=!1,y=void 0;try{for(var w,j=f.transactions[Symbol.iterator]();!(v=(w=j.next()).done);v=!0){var x=w.value;e-=x.amount,h-=x.amount}}catch(k){E=!0,y=k}finally{try{v||null==j.return||j.return()}finally{if(E)throw y}}u[f._id]=h}}catch(k){i=!0,s=k}finally{try{l||null==m.return||m.return()}finally{if(i)throw s}}O(u),b(e)}},[o]);var C=function(){var e=Object(m.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.put(Object(h.a)({},o,t));case 2:return e.abrupt("return",x());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){x()},[]),r.a.createElement(y.Provider,{value:{data:o,totalCash:d,setTotalCash:b,db:w,updateData:C,extraBudget:j}},t)},null,r.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tesya",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/tesya","/service-worker.js");B?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):F(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):F(t,e)})}}()},93:function(e,t,a){e.exports=a(219)}},[[93,1,2]]]);
//# sourceMappingURL=main.22c5e258.chunk.js.map